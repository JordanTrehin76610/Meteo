function goFavoris(e){fetch(url=`https://api.openweathermap.org/data/2.5/forecast?id=${e}&appid=${apiKey}&lang=${langue}&units=${unite}`).then(e=>e.json()).then(e=>{if("404"===e.cod){alert("Ville non trouv\xe9e !");return}avoirLaMeteo(url)})}function ajoutFavoris(e,t,a){favCity=window.localStorage.getItem("favCity"),favCountry=window.localStorage.getItem("favCountry"),favId=window.localStorage.getItem("favId"),favCity=favCity?JSON.parse(favCity):[],favCountry=favCountry?JSON.parse(favCountry):[],favId=favId?JSON.parse(favId):[],supprCountry=!1,favCity.includes(e.toUpperCase())&&favCountry.includes(t.toUpperCase())?favCity.forEach(t=>{t==e.toUpperCase()&&(changeEtoile(),indexSuppr=favCity.indexOf(t),favCity.splice(indexSuppr,1),supprCountry=!0,favCountry.splice(indexSuppr,1),favId.splice(indexSuppr,1))}):(favCity.push(e.toUpperCase()),changeEtoile()),!1==supprCountry&&favCountry.push(t),!1==supprCountry&&favId.push(a),window.localStorage.setItem("favCity",JSON.stringify(favCity)),window.localStorage.setItem("favCountry",JSON.stringify(favCountry)),window.localStorage.setItem("favId",JSON.stringify(favId)),favoris()}function favoris(){favCity=window.localStorage.getItem("favCity"),favCountry=window.localStorage.getItem("favCountry"),favId=window.localStorage.getItem("favId"),favCity=favCity?JSON.parse(favCity):[],favCountry=favCountry?JSON.parse(favCountry):[],favId=favId?JSON.parse(favId):[],document.getElementById("favoris").innerHTML="";for(let e=0;e<favCity.length;e++)document.getElementById("favoris").innerHTML+=`
        <a onclick="goFavoris('${favId[e]}')">
        <div class="container text-center rounded-4 mt-2 mb-2">
            <div class="row">
                <div class="col-2">
                    <p class="h5 mt-3 ms-3" id="tempFav${e}">temp</p>
                </div>
                <div class="col-5">
                    <img src="assets/img/01.png" alt="m\xe9t\xe9o ${favCity[e]}" class="iconeMeteo mt-2" id="meteofav${e}">
                </div>
                <div class="col-5">
                    <p class="h5">${favCity[e]}</p>
                    <p class="h5">${favCountry[e]}</p>
                </div>
            </div>
        </div>
        </a>`,iconeTempFav(favId[e],favCity[e],e)}function changeEtoile(){'<i class="bi bi-star-fill"></i>'==document.getElementById("ajoutFavorisBtn").innerHTML?document.getElementById("ajoutFavorisBtn").innerHTML='<i class="bi bi-star"></i>':document.getElementById("ajoutFavorisBtn").innerHTML='<i class="bi bi-star-fill"></i>'}function updateEtoile(){(idfav=window.localStorage.getItem("favId")).includes(document.getElementById("id").textContent)?document.getElementById("ajoutFavorisBtn").innerHTML='<i class="bi bi-star-fill"></i>':document.getElementById("ajoutFavorisBtn").innerHTML='<i class="bi bi-star"></i>'}function iconeTempFav(e,t,a){fetch(url=`https://api.openweathermap.org/data/2.5/forecast?id=${e}&appid=${apiKey}&lang=${langue}&units=${unite}`).then(e=>e.json()).then(e=>{iconeFavMeteoAChanger=`assets/img/${iconeFavMeteoHTML=function e(t){let a=t.weather[0].main,i=t.clouds.all,n=t.weather[0].id;if("Clear"==a)return"01";if("Clouds"==a&&i<50)return"02";if("Clouds"==a&&i>=50)return"03";if("Rain"==a&&n<=500)return"04";if("Rain"==a&&n>500)return"05"}(meteoItem=e.list[0])}.png`,document.getElementById(`tempFav${a}`).textContent=`${Math.round(meteoItem.main.temp)}\xb0`,document.getElementById(`meteofav${a}`).src=`assets/img/${iconeFavMeteoHTML}.png`}).catch(e=>{console.error("Erreur lors de la r\xe9cup\xe9ration de l'ic\xf4ne m\xe9t\xe9o :",e)})}